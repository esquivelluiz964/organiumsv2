{% extends 'base.html' %}
{% block title %}{{ 'Editar' if post else 'Novo' }} Post - Admin{% endblock %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/private/blog.css') }}">

<section class="admin-section">
    <h1>{{ 'Editar' if post else 'Novo' }} Post</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" class="blog-form">
        <label for="titulo">Título</label>
        <input type="text" id="titulo" name="titulo" 
               value="{{ post.titulo if post }}" required>

        <label for="slug">Slug (URL Amigável)</label>
        <input type="text" id="slug" name="slug" 
               value="{{ post.slug if post }}" 
               required placeholder="ex: meu-primeiro-post">

        <label for="resumo">Resumo</label>
        <textarea id="resumo" name="resumo" rows="3">{{ post.resumo if post }}</textarea>

        <label for="conteudo">Conteúdo</label>
        <textarea id="conteudo" name="conteudo" rows="8" required>{{ post.conteudo if post }}</textarea>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                {{ 'Atualizar' if post else 'Salvar' }}
            </button>
            <a href="{{ url_for('app_bp.admin_blog') }}" class="btn btn-secondary">Cancelar</a>
            
            {% if post %}
            <a href="{{ url_for('app_bp.admin_blog_excluir', post_id=post.id) }}" 
               class="btn btn-delete" 
               onclick="return confirm('Tem certeza que deseja excluir este post?')">
                Excluir
            </a>
            {% endif %}
        </div>
    </form>
</section>

{% endblock %}